<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Minesweeper</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="menu">
    <h1 class="game-title">
      <p id="titleM">M</p>
      <img src="./assets/flag.png" alt="" style="height: 1ch" />
      <p id="titleN">N</p>
      <p class="titleE">E</p>
      <p id="titleS">S</p>
      <p id="titleW">W</p>
      <p class="titleE">E</p>
      <p class="titleE">E</p>
      <p id="titleP">P</p>
      <p class="titleE">E</p>
      <p id="titleR">R</p>
    </h1>
    <div class="game-select-container">
      <div>
        <div>
          <input id="beginner" type="radio" name="game-select" />
          <label for="beginner">Beginner</label>
        </div>
        <div>
          <input id="intermediate" type="radio" name="game-select" />
          <label for="intermediate">Intermediate</label>
        </div>
        <div>
          <input id="expert" type="radio" name="game-select" />
          <label for="expert">Expert</label>
        </div>
        <div id="custom_div">
          <input id="custom" type="radio" name="game-select" />
          <label for="custom" id="custom-container">
            <p>Custom</p>
          </label>
          <div id="customiser">
            <label for="slider-w-and-h ">Width and Height:</label>
            <input type="range" id="slider-w-and-h" min="5" max="50" value="5">
            <label for="slider-mine ">Mine Density:</label>
            <input type="range" id="slider-mine" min="0.05" max="0.75" value="0.05" step="0.01">
          </div>
        </div>
      </div>
      <button id="game-start">Start</button>
    </div>
  </div>
  <div id="game" class="hidden">
    <div id="board"></div>
    <div class="overlay"></div>
    <div class="game-over">
      <h1>You Lose</h1>
      <button class="restart">Try Again</button>
      <button class="menu-btn">Menu</button>
    </div>
    <div class="Pause-menu">
      <h1>Pause</h1>
      <button id="resumeButton">Resume</button>
      <button id="restartButton">Restart</button>
      <button id="menuButton">Menu</button>
    </div>
    <div class="stats">
      <div class="time">
        <p class="time-text">Time:</p>
        <p class="time-writen">00</p>
      </div>
      <div class="mines">
        <p class="mines-text">Mines left:</p>
        <p class="mines-writen">00</p>
      </div>
    </div>
  </div>
</body>
<script>
  const gameModes = {
    beginner: {
      width: 9,
      height: 9,
      mines: 0.15,
    },
    intermediate: {
      width: 16,
      height: 16,
      mines: 0.2,
    },
    expert: {
      width: 30,
      height: 30,
      mines: 0.25,
    },
    custom: {
      width: 5,
      height: 5,
      mines: 0.05,
    },
  };

  function setAttrInfo({mode, width, height, mines}) {
    const eInput = document.querySelector(`#${mode}`)
    eInput.setAttribute("data-width", width)
    eInput.setAttribute("data-height", height)
    eInput.setAttribute("data-mines", mines)
  }

  function setLevelInfo({mode, width, height, mines}) {
    gameModes[mode].width = width
    gameModes[mode].height = height
    gameModes[mode].mines = mines
  }

  for (let [mode, { width, height, mines }] of Object.entries(gameModes)) {
    const elem = document.querySelector(`[for=${mode}]`);
    const eData = document.createElement("div");
    eData.innerHTML = `<p id="${mode}-info"> ${width}x${height} ${mines * 100}% mines</p>`;
    elem.appendChild(eData);
    setAttrInfo({mode: mode, width: width, height: height, mines: mines})
  }

  document.querySelector("#slider-mine").addEventListener("input", () => {
    sliderSound.play();
    const wh = parseInt(document.querySelector("#slider-w-and-h").value)
    const mines = parseFloat(document.querySelector("#slider-mine").value)
    setLevelInfo({mode: "custom", width: wh, height: wh, mines: mines})
    const customInfo = document.getElementById("custom-info");
    customInfo.innerHTML = `<p>${wh}x${wh} ${Math.round(mines * 100)}% mines</p>`;
    setAttrInfo({mode: "custom", width: wh, height: wh, mines: mines})
  });
  document.querySelector("#slider-w-and-h").addEventListener("input", () => {
    sliderSound.play();
    const wh = parseInt(document.querySelector("#slider-w-and-h").value)
    const mines = parseFloat(document.querySelector("#slider-mine").value)
    setLevelInfo({mode: "custom", width: wh, height: wh, mines: mines})
    const customInfo = document.getElementById("custom-info");
    customInfo.innerHTML = `<p>${wh}x${wh} ${Math.round(mines * 100)}% mines</p>`;
    setAttrInfo({mode:  "custom", width: wh, height: wh, mines: mines})
  });
</script>
<script src="./minesweeper.js"></script>

</html>
